!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scoreImages=function(e){return(0,r.default)("public/score-images.json",{music_id:e})},t.loadScoreImage=function(e,t){return(0,r.default)("/music/loadScoreImage",{music_id:e,file:t},"POST")},t.loadScoreData=function(e,t){return(0,r.default)("/music/loadScoreData",{music_id:e,file:t},"POST")},t.saveScoreData=function(e,t,n){return(0,r.default)("/music/SaveScoreData",{music_id:e,img_name:t,data_score:n},"POST")},t.mapDetail=function(e){return(0,r.default)("public/map-detail.json",{music_id:e})},t.loadMap=function(e,t){return(0,r.default)("/music/loadmap",{music_id:e,type:"images",file:t},"POST")},t.loadSummary=function(e,t){return(0,r.default)("/music/loadSummary",{music_id:e,type:"files",file:t},"POST")},t.summaryUpdate=function(e,t,n){return(0,r.default)("/music/SummaryUpdate",{music_id:e,map_id:t,summary:n},"POST")},t.detail=function(e){return(0,r.default)("/music/detail",{music_id:e})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(8))},function(e,t,n){"use strict";n(2);var r=a(n(7)),i=a(n(9)),o=a(n(10));function a(e){return e&&e.__esModule?e:{default:e}}!function(){new r.default({container:document.getElementById("music-score-container")}),new i.default({container:document.getElementById("music-spectrum-container")});var e=new o.default({container:document.getElementById("music-audio-container")});document.getElementById("btn-start").addEventListener("click",function(t){e.wavesurfer.playPause(),e.wavesurfer.isPlaying()?t.target.setAttribute("data-playing","true"):t.target.removeAttribute("data-playing")}),document.getElementById("btn-back").addEventListener("click",function(t){e.wavesurfer.play(0),document.getElementById("btn-start").setAttribute("data-playing","true")}),document.getElementById("btn-down").addEventListener("click",function(t){e.speed=e.speed>=3?.5:e.speed+.5,e.wavesurfer.setPlaybackRate(e.speed),document.getElementById("speed-label").innerHTML="x"+e.speed.toFixed(1)})}()},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(5)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,'*{user-select:none;box-sizing:border-box}body,html{margin:0}#app,body,html{width:100%;height:100%}#app .tool{position:absolute;left:10px;top:60%;margin-top:-40px;z-index:1000;border:1px solid #ddd;background:#f1f1f1;border-radius:5px;padding:5px}#app .tool a{cursor:pointer;color:#000;position:relative}#app .tool a i{font-size:24px;pointer-events:none}#app .tool a #speed-label{pointer-events:none;position:absolute;top:-14px;left:0;transform:scale(.5)}#app .tool a#btn-start[data-playing] .icon-play:before{content:"\\E61E"}#app .tool a:hover{color:#333}#app #music-score{height:60%}#app #music-score #music-score-container{width:100%;height:100%}#app #music-spectrum{height:30%}#app #music-spectrum #music-spectrum-container{width:100%;height:100%}#app #music-audio{height:10%}#app #music-audio #music-audio-container{width:100%;height:100%}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,u=0,s=[],c=n(6);function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],t))}else{var u=[];for(a=0;a<i.parts.length;a++)u.push(v(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:u}}}}function f(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function d(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=s[s.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),s.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=s.indexOf(e);t>=0&&s.splice(t,1)}function h(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),d(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var s=u++;n=a||(a=h(t)),r=g.bind(null,n,s,!1),i=g.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),d(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,n,t),i=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){p(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return l(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(u=r[a.id]).refs--,i.push(u)}e&&l(f(e,t),t);for(o=0;o<i.length;o++){var u;if(0===(u=i[o]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete r[u.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function g(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.container;this.swiper=new Swiper(n,{direction:"vertical"}),this.container=n.querySelector(".swiper-wrapper"),this.width=n.clientWidth,this.height=n.clientHeight,this.zr=[],this.init()}return r(e,[{key:"init",value:function(){this.setMusic(1)}},{key:"setMusic",value:function(e){var t=this;i.scoreImages(e).then(function(e){console.log("==score==",e),200===e.code&&e.data.map(function(e,n){var r=t.createPage(e,n);t.container.appendChild(r),t.swiper.update()})})}},{key:"zoomed",value:function(e){var t=d3.event.transform;e.position=[t.x,t.y],e.scale=[t.k,t.k],e.dirty()}},{key:"createPage",value:function(e,t){var n=this,r=document.createElement("div");r.className="swiper-slide",r.style.cssText="\n      width: "+this.width+"px;\n      height: "+this.height+"px;\n    ",this.zr[t]=zrender.init(r);var i=new zrender.Group;return this.zr[t].add(i),d3.select(r).call(d3.zoom().scaleExtent([1,10]).on("zoom",function(){n.zoomed(i,t)})),i.add(new zrender.Image({style:{image:e.img,x:(this.width-e.width/e.high*this.height)/2,y:0,width:e.width/e.high*this.height,height:this.height}})),r}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";"GET"===n&&(e+="?"+Object.entries(t).map(function(e){var t=r(e,2),n=t[0],i=t[1];return n+"="+i}).join("&"));var i={headers:{Accept:"application/json","Content-Type":"application/json"},method:n,credentials:"include",body:"POST"===n?JSON.stringify(t):void 0};return fetch(e,i).then(function(e){return e.json()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.container;this.container=r,this.width=r.clientWidth,this.height=r.clientHeight,this.zr=new zrender.init(r),this.g=new zrender.Group,this.zr.add(this.g),d3.select(this.container).call(d3.zoom().scaleExtent([1,10]).on("zoom",function(){n.zoomed()})),this.init()}return r(e,[{key:"zoomed",value:function(){var e=d3.event.transform;this.g.position=[e.x,e.y],this.g.scale=[e.k,e.k],this.g.dirty()}},{key:"init",value:function(){this.setMusic(1)}},{key:"setMusic",value:function(e){var t=this;i.mapDetail(e).then(function(e){console.log("==spectrum==",e),200===e.code&&t.createBg(e.data)})}},{key:"createBg",value:function(e){this.g.add(new zrender.Image({style:{image:e.img,x:0,y:0,width:e.width/e.high*this.height,height:this.height}}))}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.container;this.speed=1,this.wavesurfer=WaveSurfer.create({container:n,waveColor:"green",progressColor:"purple",height:64}),this.wavesurfer.on("ready",function(){console.log("[wavesurfer ready]")}),this.load("public/canon.mp3")}return r(e,[{key:"load",value:function(e){this.wavesurfer.load(e)}}]),e}();t.default=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLnNjc3M/YzFjMyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Njb3JlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWIvZmV0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NwZWN0cnVtLmpzIiwid2VicGFjazovLy8uL3NyYy9hdWRpby13YXZlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic2NvcmVJbWFnZXMiLCJtdXNpY19pZCIsIl9mZXRjaDIiLCJkZWZhdWx0IiwibG9hZFNjb3JlSW1hZ2UiLCJmaWxlIiwibG9hZFNjb3JlRGF0YSIsInNhdmVTY29yZURhdGEiLCJpbWdfbmFtZSIsImRhdGFfc2NvcmUiLCJtYXBEZXRhaWwiLCJsb2FkTWFwIiwidHlwZSIsImxvYWRTdW1tYXJ5Iiwic3VtbWFyeVVwZGF0ZSIsIm1hcF9pZCIsInN1bW1hcnkiLCJkZXRhaWwiLCJTY29yZSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJTcGVjdHJ1bSIsImF1ZGlvV2F2ZSIsIkF1ZGlvV2F2ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwid2F2ZXN1cmZlciIsInBsYXlQYXVzZSIsImlzUGxheWluZyIsInRhcmdldCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInBsYXkiLCJzcGVlZCIsInNldFBsYXliYWNrUmF0ZSIsImlubmVySFRNTCIsInRvRml4ZWQiLCJydW4iLCJjb250ZW50Iiwib3B0aW9ucyIsImhtciIsInRyYW5zZm9ybSIsImluc2VydEludG8iLCJ1bmRlZmluZWQiLCJsb2NhbHMiLCJwdXNoIiwidXNlU291cmNlTWFwIiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1hcCIsIml0ZW0iLCJjc3NNYXBwaW5nIiwiYnRvYSIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VNYXAiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0NvbW1lbnQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJmbiIsIm1lbW8iLCJhcHBseSIsImFyZ3VtZW50cyIsIm1lbW9pemUiLCJ3aW5kb3ciLCJhbGwiLCJhdG9iIiwiZ2V0RWxlbWVudCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwiZG9tU3R5bGUiLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJiYXNlIiwicGFydCIsImNzcyIsIm1lZGlhIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJFcnJvciIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiZmlyc3RDaGlsZCIsImJlZm9yZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImlkeCIsImluZGV4T2YiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cnMiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImZvckVhY2giLCJvYmoiLCJ1cGRhdGUiLCJyZW1vdmUiLCJyZXN1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInJlcGxhY2VUZXh0IiwidGV4dFN0b3JlIiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsIkJvb2xlYW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsImxvY2F0aW9uIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsIkFwaSIsInByb3BzIiwiX2NsYXNzQ2FsbENoZWNrIiwic3dpcGVyIiwiU3dpcGVyIiwiZGlyZWN0aW9uIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsInpyIiwiaW5pdCIsInNldE11c2ljIiwiX3RoaXMiLCJ0aGVuIiwicmVzIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJkYXRhIiwicGFnZSIsImNyZWF0ZVBhZ2UiLCJncm91cCIsImQzIiwiZXZlbnQiLCJwb3NpdGlvbiIsIngiLCJ5Iiwic2NhbGUiLCJrIiwiZGlydHkiLCJfdGhpczIiLCJkaXYiLCJjbGFzc05hbWUiLCJ6cmVuZGVyIiwiR3JvdXAiLCJhZGQiLCJzZWxlY3QiLCJ6b29tIiwic2NhbGVFeHRlbnQiLCJvbiIsInpvb21lZCIsIkltYWdlIiwiaW1hZ2UiLCJpbWciLCJoaWdoIiwidXJsIiwicGFyYW1zIiwibWV0aG9kIiwiZW50cmllcyIsIl9yZWYiLCJfcmVmMiIsIl9zbGljZWRUb0FycmF5IiwidiIsImFyZ3MiLCJoZWFkZXJzIiwiQWNjZXB0IiwiQ29udGVudC1UeXBlIiwiY3JlZGVudGlhbHMiLCJib2R5IiwiZmV0Y2giLCJqc29uIiwiZyIsImNyZWF0ZUJnIiwiV2F2ZVN1cmZlciIsIndhdmVDb2xvciIsInByb2dyZXNzQ29sb3IiLCJsb2FkIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxF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SixLQUFLMEksU0FBUyxvQ0FHUHBILEdBQUksSUFBQXVJLEVBQUE3SixLQUNYOEgsRUFBSXRLLFVBQVU4RCxHQUFJc0gsS0FBSyxTQUFBQyxHQUNyQkMsUUFBUUMsSUFBSSxlQUFnQkYsR0FDWCxNQUFiQSxFQUFJRyxNQUNOYSxFQUFLZ0MsU0FBU2hELEVBQUlJLHlDQUtmQSxHQUNQakosS0FBSzRMLEVBQUUxQixJQUFJLElBQUlGLFFBQVFRLE9BQ3JCL0csT0FDRWdILE1BQU94QixFQUFLeUIsSUFDWmxCLEVBQUcsRUFDSEMsRUFBRyxFQUNIckIsTUFBT2EsRUFBS2IsTUFBUWEsRUFBSzBCLEtBQU8zSyxLQUFLc0ksT0FDckNBLE9BQVF0SSxLQUFLc0ksOEJBaERBdEssOFVDRkFNLGFBQ25CLFNBQUFBLEVBQVl5SixnR0FBT0MsQ0FBQWhJLEtBQUExQixHQUFBLElBQ1RMLEVBQWM4SixFQUFkOUosVUFDUitCLEtBQUtoQixNQUFRLEVBQ2JnQixLQUFLdkIsV0FBYXFOLFdBQVcxUCxRQUMzQjZCLFVBQVdBLEVBQ1g4TixVQUFXLFFBQ1hDLGNBQWUsU0FFZjFELE9BQVEsS0FHVnRJLEtBQUt2QixXQUFXNkwsR0FBRyxRQUFTLFdBQzFCeEIsUUFBUUMsSUFBSSx3QkFJZC9JLEtBQUtpTSxLQUFLLDJEQUdQckIsR0FDSDVLLEtBQUt2QixXQUFXd04sS0FBS3JCLHNCQXJCSnRNIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImltcG9ydCBGZXRjaCBmcm9tICcuL2xpYi9mZXRjaCc7XG5cbi8qKlxuICog6I635Y+W5LmQ6LCx55u45YWz5pWw5o2uXG4gKiBAcGFyYW0gbXVzaWNfaWRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NvcmVJbWFnZXMobXVzaWNfaWQpIHtcbiAgcmV0dXJuIEZldGNoKCdwdWJsaWMvc2NvcmUtaW1hZ2VzLmpzb24nLCB7bXVzaWNfaWR9KTtcbn1cblxuLyoqXG4gKiDkuIrkvKDkuZDosLHlm77niYfvvIjmiYDmnInnmoTlm77niYfov5vooYx6aXDljovnvKnvvIlcbiAqIEBwYXJhbSBtdXNpY19pZCDpn7PkuZBpZFxuICogQHBhcmFtIGZpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTY29yZUltYWdlKG11c2ljX2lkLCBmaWxlKSB7XG4gIHJldHVybiBGZXRjaCgnL211c2ljL2xvYWRTY29yZUltYWdlJywge211c2ljX2lkLCBmaWxlfSwgJ1BPU1QnKTtcbn1cblxuLyoqXG4gKiDkuIrkvKDkuZDosLHlm77niYfkuIrpn7PnrKbnmoTmoIforrDmlbDmja7vvIjmiYDmnInnmoTmlbDmja7ov5vooYx6aXDljovnvKnvvIlcbiAqIEBwYXJhbSBtdXNpY19pZCDpn7PkuZBpZFxuICogQHBhcmFtIGZpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTY29yZURhdGEobXVzaWNfaWQsIGZpbGUpIHtcbiAgcmV0dXJuIEZldGNoKCcvbXVzaWMvbG9hZFNjb3JlRGF0YScsIHttdXNpY19pZCwgZmlsZX0sICdQT1NUJyk7XG59XG5cbi8qKlxuICog5L+d5a2Y5LmQ6LCx55u45YWz5pWw5o2uXG4gKiBAcGFyYW0gbXVzaWNfaWQg6Z+z5LmQaWRcbiAqIEBwYXJhbSBpbWdfbmFtZSDlm77niYflkI3np7AgdG9kbyDnoa7orqTmmK/ku4DkuYhcbiAqIEBwYXJhbSBkYXRhX3Njb3JlIOaVsOaNrlxuICogXCJkYXRhX3Njb3JlXCI6IFtcbiB7XG4gICAgIFwieFwiOiBcIjMyMVwiLFxuICAgICBcInlcIjogXCI4NDVcIixcbiAgICAgXCJ3XCI6IFwiMjVcIixcbiAgICAgXCJoXCI6IFwiMjg2XCIsXG4gICAgIFwibm9kZU5hbWVcIjogXCJicmFjZVwiLFxuICAgICBcImlkXCI6IFwiMlwiXG4gfSxcbiB7XG4gICAgIFwieFwiOiBcIjM1MFwiLFxuICAgICBcInlcIjogXCI4NDRcIixcbiAgICAgXCJ3XCI6IFwiNVwiLFxuICAgICBcImhcIjogXCI4MFwiLFxuICAgICBcIm5vZGVOYW1lXCI6IFwiYmFybGluZVwiLFxuICAgICBcImlkXCI6IFwiMTJcIlxuIH3vvIxcbiAuLi5cbiBdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYXZlU2NvcmVEYXRhKG11c2ljX2lkLCBpbWdfbmFtZSwgZGF0YV9zY29yZSkge1xuICByZXR1cm4gRmV0Y2goJy9tdXNpYy9TYXZlU2NvcmVEYXRhJywge211c2ljX2lkLCBpbWdfbmFtZSwgZGF0YV9zY29yZX0sICdQT1NUJyk7XG59XG5cbi8qKlxuICog6I635Y+W6Z+z6aKR5Zu+6LCx55u45YWz5pWw5o2uXG4gKiBAcGFyYW0gbXVzaWNfaWQg6Z+z5LmQaWRcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwRGV0YWlsKG11c2ljX2lkKSB7XG4gIHJldHVybiBGZXRjaCgncHVibGljL21hcC1kZXRhaWwuanNvbicsIHttdXNpY19pZH0pO1xufVxuXG4vKipcbiAqIOS4iuS8oOmfs+mikeWbvuiwseaWh+S7tlxuICogQHBhcmFtIG11c2ljX2lkIOmfs+S5kGlkXG4gKiBAcGFyYW0gZmlsZSDlm77niYfmlofku7ZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRNYXAobXVzaWNfaWQsIGZpbGUpIHsgICAgLy90b2RvXG4gIHJldHVybiBGZXRjaCgnL211c2ljL2xvYWRtYXAnLCB7bXVzaWNfaWQsIHR5cGU6ICdpbWFnZXMnLCBmaWxlfSwgJ1BPU1QnKTtcbn1cblxuLyoqXG4gKiDkuIrkvKDlsI/nu5Pnur/mlbDmja7mlofku7bvvIhjc3bmoLzlvI/vvIlcbiAqIEBwYXJhbSBtdXNpY19pZCDpn7PkuZBpZFxuICogQHBhcmFtIGZpbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTdW1tYXJ5KG11c2ljX2lkLCBmaWxlKSB7ICAgLy90b2RvXG4gIHJldHVybiBGZXRjaCgnL211c2ljL2xvYWRTdW1tYXJ5Jywge211c2ljX2lkLCB0eXBlOiAnZmlsZXMnLCBmaWxlfSwgJ1BPU1QnKTtcbn1cblxuLyoqXG4gKiDkv53lrZjpn7PpopHlm77osLHnm7jlhbPmlbDmja5cbiAqIEBwYXJhbSBtdXNpY19pZCDpn7PkuZBpZFxuICogQHBhcmFtIG1hcF9pZCDpn7PpopHlm77osLFpZCB0b2RvIOehruiupOaYr+S4jeaYr1xuICogQHBhcmFtIHN1bW1hcnkg5bCP57uT5L+h5oGvXG4gKiBcInN1bW1hcnlcIjoge1xuICAgICAgICBcIjEuMS4uXCI6IHtcbiAgICAgICAgICAgIFwic3RhcnRfdGltZVwiOiBcIjIuMTQ3ODQ1ODA0XCIsXG4gICAgICAgICAgICBcInBlcmNcIjogMC4wMDQ1NjY1NDgxODExNTc2MjhcbiAgICAgICAgfSxcbiAgICAgICAgXCIxLjIuLlwiOiB7XG4gICAgICAgICAgICBcInN0YXJ0X3RpbWVcIjogXCIyLjcxNTU3ODIzMVwiLFxuICAgICAgICAgICAgXCJwZXJjXCI6IDAuMDA1NzczNjA3NTg3ODc3MDU3XG4gICAgICAgIH0sXG4gICAgICAgIC4uLlxuICAgIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN1bW1hcnlVcGRhdGUobXVzaWNfaWQsIG1hcF9pZCwgc3VtbWFyeSkge1xuICByZXR1cm4gRmV0Y2goJy9tdXNpYy9TdW1tYXJ5VXBkYXRlJywge211c2ljX2lkLCBtYXBfaWQsIHN1bW1hcnl9LCAnUE9TVCcpO1xufVxuXG4vKipcbiAqIOiOt+WPlumfs+mikeebuOWFs+aVsOaNrlxuICogQHBhcmFtIG11c2ljX2lkIOmfs+S5kGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRhaWwobXVzaWNfaWQpIHtcbiAgcmV0dXJuIEZldGNoKCcvbXVzaWMvZGV0YWlsJywge211c2ljX2lkfSk7XG59IiwiaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5pbXBvcnQgU2NvcmUgZnJvbSAnLi9zY29yZSc7XG5pbXBvcnQgU3BlY3RydW0gZnJvbSAnLi9zcGVjdHJ1bSc7XG5pbXBvcnQgQXVkaW9XYXZlIGZyb20gJy4vYXVkaW8td2F2ZSc7XG5cbnJ1bigpO1xuXG5mdW5jdGlvbiBydW4oKSB7XG4gIGNvbnN0IHNjb3JlID0gbmV3IFNjb3JlKHtcbiAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdXNpYy1zY29yZS1jb250YWluZXInKVxuICB9KTtcblxuICBjb25zdCBzcGVjdHJ1bSA9IG5ldyBTcGVjdHJ1bSh7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXVzaWMtc3BlY3RydW0tY29udGFpbmVyJylcbiAgfSk7XG5cbiAgY29uc3QgYXVkaW9XYXZlID0gbmV3IEF1ZGlvV2F2ZSh7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXVzaWMtYXVkaW8tY29udGFpbmVyJylcbiAgfSk7XG5cbiAgLy/nu5Hlrprkuovku7ZcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1zdGFydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBhdWRpb1dhdmUud2F2ZXN1cmZlci5wbGF5UGF1c2UoKTtcbiAgICBpZiAoIWF1ZGlvV2F2ZS53YXZlc3VyZmVyLmlzUGxheWluZygpKSB7XG4gICAgICBlLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcGxheWluZycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGxheWluZycsICd0cnVlJyk7XG4gICAgfVxuICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWJhY2snKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgYXVkaW9XYXZlLndhdmVzdXJmZXIucGxheSgwKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXN0YXJ0Jykuc2V0QXR0cmlidXRlKCdkYXRhLXBsYXlpbmcnLCAndHJ1ZScpO1xuICB9KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWRvd24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgYXVkaW9XYXZlLnNwZWVkID0gYXVkaW9XYXZlLnNwZWVkID49IDMgPyAwLjUgOiAoYXVkaW9XYXZlLnNwZWVkICsgMC41KTtcbiAgICBhdWRpb1dhdmUud2F2ZXN1cmZlci5zZXRQbGF5YmFja1JhdGUoYXVkaW9XYXZlLnNwZWVkKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BlZWQtbGFiZWwnKS5pbm5lckhUTUwgPSAneCcgKyBhdWRpb1dhdmUuc3BlZWQudG9GaXhlZCgxKTtcbiAgfSk7XG59IiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIqe3VzZXItc2VsZWN0Om5vbmU7Ym94LXNpemluZzpib3JkZXItYm94fWJvZHksaHRtbHttYXJnaW46MH0jYXBwLGJvZHksaHRtbHt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfSNhcHAgLnRvb2x7cG9zaXRpb246YWJzb2x1dGU7bGVmdDoxMHB4O3RvcDo2MCU7bWFyZ2luLXRvcDotNDBweDt6LWluZGV4OjEwMDA7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JhY2tncm91bmQ6I2YxZjFmMTtib3JkZXItcmFkaXVzOjVweDtwYWRkaW5nOjVweH0jYXBwIC50b29sIGF7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzAwMDtwb3NpdGlvbjpyZWxhdGl2ZX0jYXBwIC50b29sIGEgaXtmb250LXNpemU6MjRweDtwb2ludGVyLWV2ZW50czpub25lfSNhcHAgLnRvb2wgYSAjc3BlZWQtbGFiZWx7cG9pbnRlci1ldmVudHM6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTE0cHg7bGVmdDowO3RyYW5zZm9ybTpzY2FsZSguNSl9I2FwcCAudG9vbCBhI2J0bi1zdGFydFtkYXRhLXBsYXlpbmddIC5pY29uLXBsYXk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFNjFFXFxcIn0jYXBwIC50b29sIGE6aG92ZXJ7Y29sb3I6IzMzM30jYXBwICNtdXNpYy1zY29yZXtoZWlnaHQ6NjAlfSNhcHAgI211c2ljLXNjb3JlICNtdXNpYy1zY29yZS1jb250YWluZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0jYXBwICNtdXNpYy1zcGVjdHJ1bXtoZWlnaHQ6MzAlfSNhcHAgI211c2ljLXNwZWN0cnVtICNtdXNpYy1zcGVjdHJ1bS1jb250YWluZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0jYXBwICNtdXNpYy1hdWRpb3toZWlnaHQ6MTAlfSNhcHAgI211c2ljLWF1ZGlvICNtdXNpYy1hdWRpby1jb250YWluZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiaW1wb3J0ICogYXMgQXBpIGZyb20gJy4vYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NvcmUge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSBwcm9wcztcblxuICAgIC8v5rOoISDmt7vliqBzbGlkZeeahOWuueWZqOaXtnN3aXBlci13cmlwcGVyLOWIneWni+WMlnN3aXBlcueahOWuueWZqOaYr3N3aXBlci1jb250YWllbnJcbiAgICB0aGlzLnN3aXBlciA9IG5ldyBTd2lwZXIoY29udGFpbmVyLCB7XG4gICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsIC8vIOWeguebtOWIh+aNoumAiemhuVxuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zd2lwZXItd3JhcHBlcicpO1xuXG4gICAgdGhpcy53aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgdGhpcy56ciA9IFtdO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLnNldE11c2ljKDEpO1xuICB9XG5cbiAgc2V0TXVzaWMoaWQpIHtcbiAgICBBcGkuc2NvcmVJbWFnZXMoaWQpLnRoZW4ocmVzID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCc9PXNjb3JlPT0nLCByZXMpXG5cbiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgIHJlcy5kYXRhLm1hcCgoZCwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmNyZWF0ZVBhZ2UoZCwgaSk7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQocGFnZSk7XG4gICAgICAgICAgdGhpcy5zd2lwZXIudXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgem9vbWVkKGdyb3VwKSB7XG4gICAgY29uc3QgdHJhbnNmb3JtID0gZDMuZXZlbnQudHJhbnNmb3JtO1xuICAgIGdyb3VwLnBvc2l0aW9uID0gW3RyYW5zZm9ybS54LCB0cmFuc2Zvcm0ueV07XG4gICAgZ3JvdXAuc2NhbGUgPSBbdHJhbnNmb3JtLmssIHRyYW5zZm9ybS5rXTtcbiAgICBncm91cC5kaXJ0eSgpO1xuICB9XG5cblxuICBjcmVhdGVQYWdlKGRhdGEsIGlkeCkge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5jbGFzc05hbWUgPSAnc3dpcGVyLXNsaWRlJztcbiAgICBkaXYuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHdpZHRoOiAke3RoaXMud2lkdGh9cHg7XG4gICAgICBoZWlnaHQ6ICR7dGhpcy5oZWlnaHR9cHg7XG4gICAgYDtcbiAgICB0aGlzLnpyW2lkeF0gPSB6cmVuZGVyLmluaXQoZGl2KTtcbiAgICBjb25zdCBncm91cCA9IG5ldyB6cmVuZGVyLkdyb3VwKCk7XG4gICAgdGhpcy56cltpZHhdLmFkZChncm91cCk7XG5cbiAgICBkMy5zZWxlY3QoZGl2KS5jYWxsKGQzLnpvb20oKVxuICAgICAgLnNjYWxlRXh0ZW50KFsxLCAxMF0pXG4gICAgICAub24oXCJ6b29tXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy56b29tZWQoZ3JvdXAsIGlkeCk7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICBncm91cC5hZGQobmV3IHpyZW5kZXIuSW1hZ2Uoe1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgaW1hZ2U6IGRhdGEuaW1nLFxuICAgICAgICB4OiAodGhpcy53aWR0aCAtIGRhdGEud2lkdGggLyBkYXRhLmhpZ2ggKiB0aGlzLmhlaWdodCkgLyAyLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3aWR0aDogZGF0YS53aWR0aCAvIGRhdGEuaGlnaCAqIHRoaXMuaGVpZ2h0LFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIGRpdjtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZmV0Y2ggKHVybCwgcGFyYW1zLCBtZXRob2QgPSAnR0VUJykge1xuICBpZiAobWV0aG9kID09PSAnR0VUJykge1xuICAgIHVybCArPSAnPycgKyBPYmplY3QuZW50cmllcyhwYXJhbXMpLm1hcCgoW2ssIHZdKSA9PiBgJHtrfT0ke3Z9YCkuam9pbignJicpO1xuICB9XG5cbiAgY29uc3QgYXJncyA9IHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgIH0sXG4gICAgbWV0aG9kLFxuICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgYm9keTogbWV0aG9kID09PSAnUE9TVCcgPyBKU09OLnN0cmluZ2lmeShwYXJhbXMpIDogdW5kZWZpbmVkXG4gIH07XG5cbiAgcmV0dXJuIGZldGNoKHVybCwgYXJncykudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7XG59IiwiaW1wb3J0ICogYXMgQXBpIGZyb20gJy4vYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NvcmUge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIGNvbnN0IHsgY29udGFpbmVyIH0gPSBwcm9wcztcblxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMud2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgIHRoaXMuenIgPSBuZXcgenJlbmRlci5pbml0KGNvbnRhaW5lcik7XG4gICAgdGhpcy5nID0gbmV3IHpyZW5kZXIuR3JvdXAoKTtcbiAgICB0aGlzLnpyLmFkZCh0aGlzLmcpO1xuXG4gICAgZDMuc2VsZWN0KHRoaXMuY29udGFpbmVyKS5jYWxsKGQzLnpvb20oKVxuICAgICAgLnNjYWxlRXh0ZW50KFsxLCAxMF0pXG4gICAgICAub24oXCJ6b29tXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy56b29tZWQoKTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgem9vbWVkKCkge1xuICAgIGNvbnN0IHRyYW5zZm9ybSA9IGQzLmV2ZW50LnRyYW5zZm9ybTtcbiAgICB0aGlzLmcucG9zaXRpb24gPSBbdHJhbnNmb3JtLngsIHRyYW5zZm9ybS55XTtcbiAgICB0aGlzLmcuc2NhbGUgPSBbdHJhbnNmb3JtLmssIHRyYW5zZm9ybS5rXTtcbiAgICB0aGlzLmcuZGlydHkoKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5zZXRNdXNpYygxKTtcbiAgfVxuXG4gIHNldE11c2ljKGlkKSB7XG4gICAgQXBpLm1hcERldGFpbChpZCkudGhlbihyZXMgPT4ge1xuICAgICAgY29uc29sZS5sb2coJz09c3BlY3RydW09PScsIHJlcylcbiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlQmcocmVzLmRhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY3JlYXRlQmcoZGF0YSkge1xuICAgIHRoaXMuZy5hZGQobmV3IHpyZW5kZXIuSW1hZ2Uoe1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgaW1hZ2U6IGRhdGEuaW1nLFxuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3aWR0aDogZGF0YS53aWR0aCAvIGRhdGEuaGlnaCAqIHRoaXMuaGVpZ2h0LFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG59XG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1ZGlvV2F2ZSB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHByb3BzO1xuICAgIHRoaXMuc3BlZWQgPSAxO1xuICAgIHRoaXMud2F2ZXN1cmZlciA9IFdhdmVTdXJmZXIuY3JlYXRlKHtcbiAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgd2F2ZUNvbG9yOiAnZ3JlZW4nLFxuICAgICAgcHJvZ3Jlc3NDb2xvcjogJ3B1cnBsZScsXG4gICAgICAvL3Njcm9sbFBhcmVudDogdHJ1ZSxcbiAgICAgIGhlaWdodDogNjRcbiAgICB9KTtcblxuICAgIHRoaXMud2F2ZXN1cmZlci5vbigncmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zb2xlLmxvZygnW3dhdmVzdXJmZXIgcmVhZHldJyk7XG5cbiAgICB9KTtcblxuICAgIHRoaXMubG9hZCgncHVibGljL2Nhbm9uLm1wMycpO1xuICB9XG5cbiAgbG9hZCh1cmwpIHtcbiAgICB0aGlzLndhdmVzdXJmZXIubG9hZCh1cmwpO1xuICB9XG5cbn0iXSwic291cmNlUm9vdCI6IiJ9